<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>東京の1週間の天気予報</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 80vh; /* 80%の高さに設定 */
            background-color: #f4f4f4; /* 背景色を少し明るく */
        }

        /* 警告用のカラーリング */
        .pressure-alert {
            color: red;
            font-weight: bold;
        }

        /* テーブルのスタイル設定 */
        table {
            width: 80%; /* テーブルの幅を80%に */
            border-collapse: collapse; /* ボーダーの重なりをなくす */
            background-color: white; /* テーブルの背景色 */
        }

        th, td {
            border: 1px solid #ccc; /* ボーダーの色 */
            padding: 8px 12px; /* セルのパディング */
        }

    </style>
</head>
<body>

<h1>東京の1週間の天気予報</h1>

<table>
    <thead>
        <tr>
            <th>日付</th>
            <th>最低気温</th>
            <th>最高気温</th>
            <th>気圧</th>
            <th>気圧の変動</th>
        </tr>
    </thead>
    <tbody id="weatherData">
    </tbody>
</table>

<script>
    // 仮の緯度と経度
    const lat = 35.6895;
    const lon = 139.6917;

    // 東京のタイムゾーン
    const timezone = "Asia/Tokyo";

    // Open-Meteo APIを呼び出して天気データを取得
    fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&timezone=${timezone}&daily=temperature_2m_min,temperature_2m_max&hourly=pressure_msl`)
        .then(response => response.json())
        .then(data => {
            console.log(data); // APIのレスポンスをログに出力

            if (data && data.daily && data.daily.time) {
                const weatherDataElement = document.getElementById('weatherData');
                const timeData = data.daily.time;
                const tempMinData = data.daily.temperature_2m_min;
                const tempMaxData = data.daily.temperature_2m_max;
                
                // 注意: キー名を pressure_msl に修正
                const pressureData = data.hourly.pressure_msl;

                for (let i = 0; i < timeData.length; i++) {
                    const tr = document.createElement('tr');

                    const dateCell = document.createElement('td');
                    const date = new Date(timeData[i]);
                    dateCell.textContent = date.toLocaleDateString();

                    const tempMinCell = document.createElement('td');
                    tempMinCell.textContent = tempMinData[i] + '℃';

                    const tempMaxCell = document.createElement('td');
                    tempMaxCell.textContent = tempMaxData[i] + '℃';

                    const pressureCell = document.createElement('td');
                    pressureCell.textContent = pressureData[i] + ' hPa'; 

                    tr.appendChild(dateCell);
                    tr.appendChild(tempMinCell);
                    tr.appendChild(tempMaxCell);
                    tr.appendChild(pressureCell);

                    weatherDataElement.appendChild(tr);
                }
            }
        })
        .catch(error => {
            console.error("Error fetching weather data:", error);
        });
</script>

</body>
